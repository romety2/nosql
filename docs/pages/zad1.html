<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<meta charset="utf-8">
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
	<meta name="generator" content="pandoc"/>
  <title>Technologie NoSQL</title>
  <link rel="stylesheet" href="../style/style.css">
</head>
<body>
	<div class = "return">
		<a href="../index.html">powrót</a>
	</div>
	<div class = "description">
		<h1 class="text-center">Zadanie 1 (EDA)</h1>
		</br>
		<h2>Informacje o danych</h2>	
		<p class="description-data">
			Dane zawierają najnowsze (luty 2017 r.) dane z katalogu pocztowego służb zdrowia w Wielkiej Brytanii.
			<a href="https://data.gov.uk/dataset/nhs-postcode-directory-latest-centroids" target="_blank">Źródło</a>.
			</br>
			Rozmiar: 2 GB
			</br>
			Ilość: 2593752
		</p>
		</br>
		<h2>Instalacja i konfiguracja oprogramowania</h2>
		<h3>postgreSQL</h3>
		<p>
			Do rozwiązania zadania użyto bazy postgreSQL. Należy ją pobrać ze 
			<a href="https://www.enterprisedb.com/downloads/postgres-postgresql-downloads" target="_blank">strony</a>
			i zainstalować. Podczas instalacji możliwe, że będziemy musieli podać hasło do domyślnego użytkownika <i>postgres</i>.
		</p>
		<h3>jdk</h3>
		<p>
			Aby uruchomić bazę elasticsearch potrzebny jest najnowyszy jdk, który jest możliwy do sciągniećia ze
			<a href="http://www.oracle.com/technetwork/java/javase/downloads/index.html" target="_blank">strony</a> i zainstalować.
			</br></br>
			Upewnijmy się czy zmienne środowiskowe są odpowiednio skonfigurowane.
			</br>
			<div class="text-center">
				<i>Panel sterowania -> System -> Zmień ustawienia -> Zaawansowane (zakładka) -> Zmienne środowiskowe...</i>
			</div>
			</br>
			W <i>zmienne systemowe</i> szukamy zmiennej <i>JAVA_HOME</i> oraz sprawdzamy czy ścieżka
			jest ustawiona na zainstalowany przez z nas <i>jdk</i>.
			</br>
			Jeśli nie, zaznaczamy zmienną, klikamy <i>Edytuj...</i> oraz zmieniamy ścieżkę i ponownie uruchamiamy komputer.
		</p>
		<h3 id="iiko3">python</h3>
		<p>
			Python nam będzie potrzebny do uruchomienia skryptów. Pobieramy ze
			<a href="https://www.python.org/downloads/windows/" target="_blank">strony</a> najnowaszą wesję oraz instalujemy.
		</p>
		</br>
		<h2 id="post">PostgreSQL</h2>
		<h3 id="post1">import danych</h3>
		<p>
			<a href="http:geoportal.statistics.gov.uk/datasets/675f07b52292428992709d0af98d86d9_0.csv">Pobierz</a> dane.
			</br></br>
			 <a href="../../scripts/s1.py" download>Pobierz</a>
			skrypt oraz przenieś go do folderu gdzie pobrane są dane.
			</br>
			Następnie przypomocy skryptu usuwamy znaki które nie są kodowane w <i>windows-1250</i>, polecenie w <i>cmd</i>:
			<div class="command">
				<code>
py s1.py
				</code>
			</div>
			Pobieramy ze <a href="https://github.com/lukasmartinelli/pgfutter/releases/tag/v1.1" target="_blank">strony</a> <i>pgfutter</i>,
			oraz zmieniamy nazwę pobranego pliku na <i>pgfutter.exe</i>.
			</br>
			Następnie importujemy dane do postreSQL'a (plik z danymi oraz pgfutter muszą znajdować się w tym samym katalogu), polecenie:
			<div class="command">
				<code>
pgfutter --pass "[hasło]" --table "test" csv map.csv
				</code>
			</div>
			</br>
			Import danych średnio zużywał zasoby komputera.
			</br></br>
			<div class="text-center">
				<img src="../images/screen7.PNG" height="400em" width="500em">
			</div>
			<div class="description-image">Procesor podczas importu danych do postreSQL</div>
			</br></br>
			<div class="text-center">
				<img src="../images/screen8.PNG" height="400em" width="500em">
			</div>
			<div class="description-image">Pamięć podczas importu danych do postreSQL</div>
			</br></br>
			<div class="text-center">
				<img src="../images/screen9.PNG" height="400em" width="500em">
			</div>
			<div class="description-image">Dysk podczas importu danych do postreSQL</div>
			</br></br>
			Wykonanie trwało ok. 2 minut, 35 sekund.
			</br>
			Ostatecznie pojawił się komunikat: "2593752 rows imported into import.test"
			<div class="text-center">
				<img src="../images/screen13.PNG" height="30em" width="1200em">
			</div>
			<div class="description-image">Import danych do posgreSQL</div>
			</br>
			Czyli dane zostały zaimportowane to <i>tabeli</i>test w schemacie <i>import</i>, czyli <i>import.test</i>.	
		</p>
		<h3 id="post2">przykładowy rekord</h3>
		<p>
			Ponowanie uruchamia serwer, przypominam, że aby to zrobić, przemieszczamy się do pliku binarnego posgreSQL'a, polecenie w konsoli <i>cmd</i>:
			<div class="command">
				<code>
cd [ścieżka gdzie jest zainstalowany postgreSQL]\PostgreSQL\9.6\bin
				</code>
			</div>
			Następnie logujemy się jako domyślnie utworzony użytkownik <i>postgres</i> polecenie:
			<div class="command">
				<code>
psql -U postgres
				</code>
			</div>
			oraz podajemy hasło które ustawiliśmy przy instalacji postgreSQL'a (jeśli instalator nie wymagał podania domyślne hasło to postgrespass).
			</br></br>
		</p>
		<p>
			Następnie aby wyświetlić przykładową daną wydajemy polecenie.
			<div class="command">
				<code>
select * from import.test limit 1;
				</code>
			</div>
			Wówczas otrzymano: 
			<div class="text-center">
				<img src="../images/screen14.PNG" height="150em" width="1200em">
			</div>
			<div class="description-image">Przykładowy rekord postreSQL</div>
			Wykonanie tego zapytania pojawiło się w mgnieniu oka.
		</p>
		</br>
		<h2 id="el">Elasticsearch</h2>
		<h2 id="post">Podsumowanie</h2>
		<table class="summary table-center">
			<tr>
				<th rowspan="2">Nazwa</th>
				<th colspan="4">PostgreSQL</th>
				<th colspan="4">Elasticsearch</th>
			</tr>
			<tr>
				<th>czas</th>
				<th>CPU</th>
				<th>Pamięć</th>
				<th>Dysk</th>	
				<th>czas</th>
				<th>CPU</th>
				<th>Pamięć</th>
				<th>Dysk</th>	
			</tr>
			<tr>
				<td>Import danych</td>
				<td>2 min. 35 sek.</td>
				<td>70%</td>	
				<td>40%</td>	
				<td>100%</td>	
				<td>?</td>
				<td>?</td>
				<td>?</td>
				<td>?</td>
			</tr>
			<tr>
				<td>Przykładowy rekord</td>
				<td>1 sek.</td>
				<td>30%</td>
				<td>30%</td>
				<td>0%</td>
				<td>1 sek.</td>
				<td>30%</td>
				<td>30%</td>
				<td>0%</td>
			</tr>
		</table>
	</div>
	</br>
	<div class = "return">
		<a href="../index.html">powrót</a>
	</div>
</body>