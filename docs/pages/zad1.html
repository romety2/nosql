<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<meta charset="utf-8">
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
	<meta name="generator" content="pandoc"/>
  <title>Technologie NoSQL</title>
  <link rel="stylesheet" href="../style/style.css">
</head>
<body>
	<div class = "return">
		<a href="../index.html">powrót</a>
	</div>
	<div class = "description">
		<h1 class="text-center">Zadanie 1</h1>
		<h2>Informacje o danych</h2>	
		<p class="description-data">
			Dane zawierają najnowsze (luty 2017 r.) dane z katalogu pocztowego służb zdrowia w Wielkiej Brytanii.
			<a href="https://data.gov.uk/dataset/nhs-postcode-directory-latest-centroids" target="_blank">Źródło</a>.
			</br>
			Rozmiar: 2 GB
			</br>
			Ilość: 2593752
		</p>
		<h2>Instalacja i konfiguracja oprogramowania</h2>
		<h3>postgreSQL</h3>
		<p>
			Do rozwiązania zadania użyto bazy postgreSQL. Należy ją
			<a href="https://www.enterprisedb.com/downloads/postgres-postgresql-downloads" target="_blank">pobrać</a>,
			zainstalować. Podczas instalacji możliwe, że będziemy musieli podać hasło do domyślnego użytkownika <i>postgres</i>.
		</p>
		<h3>jq</h3>
		<p>
			Narzędzie jq służy do przekształcenia danych w taki sposób, aby otrzymać tylko te dane które nas interesują.
			W naszym przypadku będą to dane które zawierają współrzędne geograficzne.
			</br>
			Aby zainstalować jq wstępnie trzeba zaisntalować framework Chocolatey.
			Uruchamiamy konsolę cmd <b>z uprawnieniami administratora</b> oraz wydajemy polecenie:
			<div class="command">
				<code>
@powershell -NoProfile -ExecutionPolicy Bypass -Command "iex ((New-Object System.Net.WebClient).DownloadString('https://chocolatey.org/install.ps1'))" && SET "PATH=%PATH%;%ALLUSERSPROFILE%\chocolatey\bin"
				</code>
			</div>
			Następnie, aby zaintalować jq należy wydać polecenie:
			<div class="command">
				<code>
chocolatey install jq
				</code>
			</div>
			Więcej na:
			<ul>
				<li><a href = "https://chocolatey.org/">chocolatey</a></li>
				<li><a href = "https://stedolan.github.io/jq/">jq</a></li>
			</ul>
		</p>
		</br>
		<h2>Import danych</h2>	
		<h3>Przekształcenie danych</h3>			
		<p>
			Ze <a href="https://data.gov.uk/dataset/nhs-postcode-directory-latest-centroids" target="_blank">strony</a> ściagamy plik z rozszeżeniem geojson.
			</br>
			Musimy "wyłuskać" dane które zawierają współrzędne geograficzne.
			</br>
			Plik z danymi, który pobrałem wymagał zmiany nazwy gdyż nie może zawierać znaków takich jak: _. Zamieniłem nazwę na map.geojson
			</br>
			W moim przypadku interesujące pole to features, więc aby to zrobić w cmd wydajemy polecenie:
			<div class="command">
				<code>
jq ".features" map.geojson > mapPom.geojson
				</code>
			</div>
			Podczas wykonywania tej operacji doszło do zużycia zasobów (ilustracja niżej). 
			</br></br>
			<div class="text-center">
				<img src="../images/screen1.PNG" height="400em" width="500em">
			</div>
			<div class="description-image">Procesor podczas przekształcania danych</div>
			</br></br>
			<div class="text-center">
				<img src="../images/screen2.PNG" height="400em" width="500em">
			</div>
			<div class="description-image">Pamięć podczas przekształcania danych</div>
			</br></br>
			<div class="text-center">
				<img src="../images/screen3.PNG" height="400em" width="500em">
			</div>
			<div class="description-image">Dysk podczas przekształcania danych</div>
			</br></br>
			Wykonanie trwało ok. 35 minut.
			</br></br>
		</p>
	</div>
	</br>
	<div class = "return">
		<a href="../index.html">powrót</a>
	</div>
</body>